jQuery(function(a){a(".totalpoll-poll-container").addClass("dom-ready");a(document).delegate('.totalpoll-poll-container [name^="totalpoll[action]"]',"click",function(d){d.preventDefault();var c=a(this);var f=c.closest(".totalpoll-poll-container");var b=f.find("form").serializeArray();b.push({name:c.attr("name"),value:c.val()});b.push({name:"action",value:TotalPoll.AJAX_ACTION||"tp_action"});f.fadeTo("slow",0.5).css({"pointer-events":"none","min-height":f.outerHeight()});a.ajax({url:TotalPoll.AJAX||this.action,type:"POST",data:b,success:function(h){var g=a(h).hide();var e=f.offset().top;f.after(g).fadeOut(function(){g.fadeIn().addClass("dom-ready");a(this).remove();a(document.body).animate({scrollTop:e-64});a(document).trigger("totalpoll.after.ajax",[{button:c,container:g},b])})}})});if(window.TotalPollAsync){a.each(TotalPollAsync,function(b,d){var c=a("#"+d.container);c.load(TotalPoll.AJAX,{action:TotalPoll.AJAX_ACTION||"tp_action",totalpoll:{id:d.id,action:"load"}})})}a(document).delegate('.totalpoll-poll-container input[name="totalpoll[choices][]"]',"change",function(i){i.preventDefault();var h=a(this);var f=h.closest(".totalpoll-poll-container");var g=f.find('input[name="totalpoll[choices][]"]');var c=g.filter(":checked");var b=g.not(":checked");var d=f.attr("data-max-selection");if(d>1&&c.length>=d){b.attr("disabled","")}else{g.removeAttr("disabled")}g.each(function(){a(this).closest("[data-tp-choice]").toggleClass("checked",this.checked)})});window.reCaptchaReady=function(){a("[data-tp-captcha]").each(function(){grecaptcha.render(this,{sitekey:TotalPoll.settings.limitations.captcha.sitekey})})};if(TotalPoll.settings.limitations.captcha.enabled){a(document).on("totalpoll.after.ajax",function(){window.reCaptchaReady()})}});